<!-- HTML Meta Tags -->
<meta name="description" content="[{{ clanInfo['tag'] }}] {{ clanInfo['name'] }} clan profile on Inlayo" />
<meta property="og:image" content="https://{{ domain() }}/static/favicon/android-chrome-256x256.png" />

<!-- Google / Search Engine Tags -->
<meta itemprop="name" content="[{{ clanInfo['tag'] }}] {{ clanInfo['name'] }} - Inlayo" />
<meta itemprop="description" content="[{{ clanInfo['tag'] }}] {{ clanInfo['name'] }} clan profile on Inlayo" />
<meta itemprop="image" content="https://{{ domain() }}/static/favicon/android-chrome-256x256.png" />

<!-- Facebook Meta Tags -->
<meta property="og:url" content="https://{{ domain() }}/c/{{ clanInfo['id'] }}" />
<meta property="og:type" content="website" />
<meta property="og:title" content="[{{ clanInfo['tag'] }}] {{ clanInfo['name'] }} - Inlayo" />
<meta property="og:description" content="[{{ clanInfo['tag'] }}] {{ clanInfo['name'] }} clan profile on Inlayo" />
<meta property="og:image" content="https://{{ domain() }}/static/favicon/android-chrome-256x256.png" />

<!-- Twitter Meta Tags -->
<meta name="twitter:title" content="[{{ clanInfo['tag'] }}] {{ clanInfo['name'] }} - Inlayo" />
<meta name="twitter:description" content="[{{ clanInfo['tag'] }}] {{ clanInfo['name'] }} clan profile on Inlayo" />
<meta name="twitter:image" content="https://{{ domain() }}/static/favicon/android-chrome-256x256.png" />

{% extends 'base.html' %}
{% block title %} [{{ clanInfo['tag'] }}] {{ clanInfo['name'] }} {% endblock %}
{% block header %}
<span style="color: rgb(172, 235, 140)">⬤</span>
<% addCommas(map[`n50`]) %>
  <span style="color: rgb(232, 213, 167)">⬤</span>
  <% addCommas(map[`nmiss`]) %>
    <span style="color: rgb(254, 179, 179)">⬤</span>
    <div v-if="map[`max_combo`] == map[`beatmap`][`max_combo`]" style="display: inline-block; color: gold">
      FC
    </div>
    <% map[`max_combo`] %>/<% map[`beatmap`][`max_combo`] %>x {% endmacro %} {%
        macro scores(title, id) %}
        <div class="log-block" v-bind:class="{ 'load' : data.scores.{{ id }}.load }">
          <div class="header">
            <div class="title">
              <i class="fas fa-trophy"></i> {{ title }} (<% data.scores['{{ id }}'].out.length %>/<% data.scores['{{ id
                  }}'].more.total %>)
            </div>
          </div>
          <div v-if="data.scores.{{ id }}.out.length != 0" class="scores">
            <div v-for="(map, index) in data.scores.{{ id }}.out" class="map-single"
              :style="`background: linear-gradient(rgba(24, 24, 30, 0.6) 0%, rgba(24, 24, 30, 0.8) 100%), url(https://assets.ppy.sh/beatmaps/${map.beatmap.set_id}/covers/cover.jpg)`">
              <div class="map-data">
                <div class="map-content1">
                  <div class="map-image">
                    <img v-bind:src="'https://assets.ppy.sh/beatmaps/' + map.beatmap.set_id + '/covers/card.jpg'"
                      onerror="this.style.display='none'" class="map-image-picture" />
                  </div>
                  <div class="map-title-block">
                    <div class="map-title">
                      <a class="beatmap-link" :href="'/scores/' + map.id">
                        <% map.beatmap.artist %> - <% map.beatmap.title %> [<% map.beatmap.version %>]
                      </a>
                    </div>
                    <div class="play-stats">{{ playstats() }}</div>
                    <div class="map-date">
                      <time>
                        <% timeago.format(map.play_time + 'Z' ) %>
                      </time>
                    </div>
                  </div>
                </div>
                <div class="map-content2">
                  <div class="score-details d-flex">
                    <div class="score-details_right-block">
                      <div class="score-details_pp-block">
                        <div class="map-mods">
                          <% ("+ " + map[`mods_readable`] + " ").replace(" NM", "" ).replace("RXNC", "NCRX"
                            ).replace("APNC", "NCAP" ).replace("HDHRNC", "HDNCHR" ).replace("NFNC", "NCNF"
                            ).replace("RX", "RX" ).replace("AP", "AP" ).replace("DTNC", "NC"
                            ).replace("+ ", "").replace(" + ",
                  " +") %>
                        </div>
                        <div class="map-pp">
                          <% (map.pp || 0).toFixed() %><span class="map-pp-unit">pp</span>
                        </div>
                        <div class="map-acc">
                          accuracy:&nbsp;<b>
                            <% (map.acc || 0).toFixed(2) %>%
                          </b>
                        </div>
                      </div>
                      <div class="score-details_grade-block">
                        <div class="rank-single">
                          <div v-bind:class="'map-rank rank-'+map.grade">
                            <% map.grade.replace("X", "SS" ).replace("H", "" ) %>
                          </div>
                        </div>
                      </div>
                      <div class="download-replay">
                        <a :href="'https://api.{{ domain() }}/v1/get_replay?id=' + map.id"
                          class="fa-solid fa-download"></a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div v-else-if="data.scores.{{ id }}.out.length == 0" class="stats-block">
            <div class="columns is-marginless">
              <div class="column is-1">
                <h1 class="title">: (</h1>
              </div>
              <div class="column">
                <h1 class="title is-6">No scores available</h1>
                <p class="subtitle is-7">Try playing something?</p>
              </div>
            </div>
          </div>
          <div v-if="data.scores.{{ id }}.more.full == false" class="extra-block">
            <a class="show-button" @click="AddLimit('{{ id }}score')">Show more</a>
          </div>
        </div>
        {% endmacro %} {% macro maps(title, id) %}
        <div class="log-block" v-bind:class="{ 'load' : data.maps.{{ id }}.load }">
          <div class="header">
            <div class="title">
              <i class="fas fa-address-book"></i> {{ title }} (<% data.maps['{{ id }}'].out.length %>/<% data.maps['{{
                  id }}'].more.total %>)
            </div>
          </div>
          <div v-if="data.maps.{{ id }}.out.length != 0" class="beatmaps"
            style="display: flex; flex-direction: column; margin-bottom: 8px">
            <div v-for="(map, index) in data.maps.{{ id }}.out" class="map-single"
              :style="`background: linear-gradient(rgba(24, 24, 30, 0.6) 0%, rgba(24, 24, 30, 0.8) 100%), url(https://assets.ppy.sh/beatmaps/${map.set_id}/covers/cover.jpg); width: 100%; margin-bottom: 0;`">
              <div class="map-data">
                <div class="map-content1">
                  <div class="map-image">
                    <img v-bind:src="'https://assets.ppy.sh/beatmaps/' + map.set_id + '/covers/card.jpg'"
                      onerror="this.style.display='none'" class="map-image-picture" />
                  </div>
                  <div class="map-title-block">
                    <div class="map-title">
                      <a class="beatmap-link" :href="'/b/' + map.id">
                        <% map.artist %> - <% map.title %> [<% map.version %>]
                      </a>
                    </div>
                    <div class="map-mapper">
                      by <span class="newmaps-color">
                        <% map.creator %>
                      </span>
                    </div>
                    <div class="map-plays">Plays: <% map.plays %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div v-else-if="data.maps.{{ id }}.out.length == 0" class="stats-block">
            <div class="columns is-marginless">
              <div class="column is-1">
                <h1 class="title">:(</h1>
              </div>
              <div class="column">
                <h1 class="title is-6">No beatmaps available</h1>
                <p class="subtitle is-7">Try playing something?</p>
              </div>
            </div>
          </div>
          <div v-if="data.maps.{{ id }}.more.full == false" class="extra-block">
            <a class="show-button" @click="AddLimit('mostplay')">Show more</a>
          </div>
        </div>
        <script src="/static/js/asserts/vue.js"></script>
        <script src="/static/js/asserts/vue-axios.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.2/timeago.min.js"></script>
        <link rel="stylesheet" href="/static/css/pages/profile.css" />

        <script>
          var clanid = Number("{{ clanInfo['id'] }}");
          var clanInfo = {{ clanInfo| tojson }};
          var clanMembers = {{ clanMembers| tojson }};
          var mode = "{{ mode }}";
          var mods = "{{ mods }}";
          var domain = "{{ domain() }}";
        </script>
        {% endblock %}

        {% block content %} {% if flash %}
        <div class="noti-banner noti-banner-warning">
          <div class="container">
            <div class="noti-column">
              <div class="noti-col noti-col-icon"></div>
              <div class="noti-col noti-col-label">
                <div class="noti-bannertype">
                  {% if status=='error' %} Warning {% elif status=='success' %} Notice
                  {% endif %}
                </div>
                <div class="noti-bannertext">
                  {% if status=='error' %} Uh oh! Be careful! {% elif status=='success'
                  %} Hey! Listen! {% endif %}
                </div>
              </div>
              <div class="noti-banner-text">{{ flash }}</div>
            </div>
          </div>
        </div>
        {% endif %}

        <div id="app">
          <div class="main-block">
            <div class="profile-bg">
              <div class="info-block">
                <h1 class="title">
                  <p class="ranks">
                    <span class="bgf">[{{ clanInfo['tag'] }}] {{ clanInfo['name'] }}</span>
                  </p>
                </h1>
                <div class="subtitle">
                  Created: {{ datetime.datetime.fromisoformat(clanInfo['created_at']|string).strftime('%Y-%m-%d') }}
                </div>
                <div class="subtitle">
                  Owner: <a href="/u/{{ clanInfo['owner'] }}">{{ clanInfo['owner_name'] }}</a>
                </div>
              </div>
              <div class="anime-girl">
                <!-- Clan banner could go here -->
              </div>
            </div>
            <div class="profile-flex">
              <div class="profile-avatar-area">
                <!-- Clan icon/logo placeholder -->
                <div class="rounded-avatar profile-avatar"
                  style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; font-size: 48px; color: white; font-weight: bold;">
                  {{ clanInfo['tag'][:2] }}
                </div>
              </div>
              <div class="bar-selection mode-selects">
                <div class="select-left">
                  <a class="simple-banner-switch" v-bind:class="{ 'selected': mode === 'std' }"
                    @click="ChangeModeMods('std',mods)"><i class="mode-icon mode-osu"></i><span
                      class="mode-text">osu!</span></a>
                  <a class="simple-banner-switch"
                    v-bind:class="{ 'selected': mode === 'taiko', 'disabled': mods === 'ap' }"
                    @click="ChangeModeMods('taiko',mods)"><i class="mode-icon mode-taiko"></i><span
                      class="mode-text">osu!taiko</span></a>
                  <a class="simple-banner-switch"
                    v-bind:class="{ 'selected': mode === 'catch', 'disabled': mods === 'ap' }"
                    @click="ChangeModeMods('catch',mods)"><i class="mode-icon mode-catch"></i><span
                      class="mode-text">osu!catch</span></a>
                  <a class="simple-banner-switch"
                    v-bind:class="{ 'selected': mode === 'mania', 'disabled': mods === 'ap' || mods === 'rx' }"
                    @click="ChangeModeMods('mania',mods)"><i class="mode-icon mode-mania"></i><span
                      class="mode-text">osu!mania</span></a>
                </div>
                <div class="select-right">
                  <a class="simple-banner-switch" v-bind:class=" { 'selected': mods === 'vn' }"
                    @click="ChangeModeMods(mode,'vn')"><span class="mods-fulltext">Vanilla</span>
                    <span class="mods-shorttext">VN</span></a>
                  <a class="simple-banner-switch"
                    v-bind:class=" { 'selected': mods === 'rx', 'disabled': mode === 'mania' }"
                    @click="ChangeModeMods(mode,'rx')"><span class="mods-fulltext">Relax</span>
                    <span class="mods-shorttext">RX</span></a>
                  <a class="simple-banner-switch"
                    v-bind:class=" { 'selected': mods === 'ap', 'disabled': mode === 'taiko' || mode === 'catch' || mode === 'mania'  }"
                    @click="ChangeModeMods(mode,'ap')"><span class="mods-fulltext">Autopilot</span><span
                      class="mods-shorttext">AP</span></a>
                </div>
              </div>
            </div>
          </div>
          <div class="second-block">
            <div class="columns is-marginless two-sides">
              <div class="column is-one-third" v-cloak>
                <div class="header">
                  <div class="title"><i class="fas fa-chart-pie"></i> Clan Statistics</div>
                </div>
                <div class="stats-block" v-bind:class="{ 'load': data.stats.load }">
                  <table class="is-striped">
                    <tbody>
                      <tr>
                        <td><b>Total PP</b></td>
                        <td class="right-aligned">
                          <% addCommas(Math.round(data.stats.out[modegulag].total_pp || 0)) %>
                        </td>
                      </tr>
                      <tr>
                        <td><b>Average PP</b></td>
                        <td class="right-aligned">
                          <% addCommas(Math.round(data.stats.out[modegulag].avg_pp || 0)) %>
                        </td>
                      </tr>
                      <tr>
                        <td><b>Total Ranked Score</b></td>
                        <td class="right-aligned">
                          <% addCommas(data.stats.out[modegulag].total_rscore || 0) %>
                        </td>
                      </tr>
                      <tr>
                        <td><b>Total Score</b></td>
                        <td class="right-aligned">
                          <% addCommas(data.stats.out[modegulag].total_tscore || 0) %>
                        </td>
                      </tr>
                      <tr>
                        <td><b>Total Playcount</b></td>
                        <td class="right-aligned">
                          <% addCommas(data.stats.out[modegulag].total_plays || 0) %>
                        </td>
                      </tr>
                      <tr>
                        <td><b>Average Accuracy</b></td>
                        <td class="right-aligned">
                          <% (data.stats.out[modegulag].avg_acc || 0).toFixed(2) %>%
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <div class="header">
                  <div class="title"><i class="fas fa-users"></i> Members (<% clanMembers.length + 1 %>)</div>
                </div>
                <div class="stats-block">
                  <table class="is-striped">
                    <tbody>
                      <tr>
                        <td>
                          <a :title="clanInfo.owner_country"
                            :style="'background-image: url(https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/' + countryToEmoji(clanInfo.owner_country) + '.svg)'"
                            class="player-flag"
                            style="display: inline-block; width: 20px; height: 15px; background-size: cover; margin-right: 5px;">
                          </a>
                          <a :href="'/u/' + clanInfo.owner">{{ clanInfo.owner_name }}</a>
                        </td>
                        <td class="right-aligned">
                          <span style="color: gold;">Owner</span>
                        </td>
                      </tr>
                      <tr v-for="member in clanMembers">
                        <td>
                          <a :title="member.country"
                            :style="'background-image: url(https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/' + countryToEmoji(member.country) + '.svg)'"
                            class="player-flag"
                            style="display: inline-block; width: 20px; height: 15px; background-size: cover; margin-right: 5px;">
                          </a>
                          <a :href="'/u/' + member.id">
                            <% member.name %>
                          </a>
                        </td>
                        <td class="right-aligned">
                          <span v-if="member.clan_priv === 2" style="color: #66d9ef;">Officer</span>
                          <span v-else>Member</span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="column">
                <div class="log-block" v-bind:class="{ 'load' : data.scores.best.load }">
                  <div class="header">
                    <div class="title">
                      <i class="fas fa-trophy"></i> Best Clan Scores (<% data.scores.best.out.length %>)
                    </div>
                  </div>
                  <div v-if="data.scores.best.out.length > 0" class="scores">
                    <div v-for="(map, index) in data.scores.best.out" class="map-single"
                      :style="`background: linear-gradient(rgba(24, 24, 30, 0.6) 0%, rgba(24, 24, 30, 0.8) 100%), url(https://assets.ppy.sh/beatmaps/${map.beatmap.set_id}/covers/cover.jpg)`">
                      <div class="map-data">
                        <div class="map-content1">
                          <div class="map-image">
                            <img
                              v-bind:src="'https://assets.ppy.sh/beatmaps/' + map.beatmap.set_id + '/covers/card.jpg'"
                              onerror="this.style.display='none'" class="map-image-picture" />
                          </div>
                          <div class="map-title-block">
                            <div class="map-title">
                              <a class="beatmap-link" :href="'/scores/' + map.id">
                                <% map.beatmap.artist %> - <% map.beatmap.title %> [<% map.beatmap.version %>]
                              </a>
                            </div>
                            <div class="play-stats">
                              <% addCommas(map.n100) %> <span style="color: rgb(172, 235, 140)">⬤</span>
                                <% addCommas(map.n50) %> <span style="color: rgb(232, 213, 167)">⬤</span>
                                  <% addCommas(map.nmiss) %> <span style="color: rgb(254, 179, 179)">⬤</span>
                                    <div v-if="map.max_combo == map.beatmap.max_combo"
                                      style="display: inline-block; color: gold">FC</div>
                                    <% map.max_combo %>/<% map.beatmap.max_combo %>x
                            </div>
                            <div class="map-date">
                              <time>
                                <% timeago.format(map.play_time + 'Z' ) %>
                              </time>
                            </div>
                            <div class="map-player">
                              by <a :href="'/u/' + map.userid">
                                <% map.player_name %>
                              </a>
                            </div>
                          </div>
                        </div>
                        <div class="map-content2">
                          <div class="score-details d-flex">
                            <div class="score-details_right-block">
                              <div class="score-details_pp-block">
                                <div class="map-mods">
                                  <% ("+ " + map.mods_readable + " ").replace(" NM", "" ).replace("RXNC", "NCRX"
                                    ).replace("APNC", "NCAP" ).replace("HDHRNC", "HDNCHR" ).replace("NFNC", "NCNF"
                                    ).replace("RX", "RX" ).replace("AP", "AP" ).replace("DTNC", "NC"
                                    ).replace("+ ", "").replace(" + "," +") %>
                                </div>
                                <div class="map-pp">
                                  <% (map.pp || 0).toFixed() %><span class="map-pp-unit">pp</span>
                                </div>
                                <div class="map-acc">
                                  accuracy:&nbsp;<b>
                                    <% (map.acc || 0).toFixed(2) %>%
                                  </b>
                                </div>
                              </div>
                              <div class="score-details_grade-block">
                                <div class="rank-single">
                                  <div v-bind:class="'map-rank rank-'+map.grade">
                                    <% map.grade.replace("X", "SS" ).replace("H", "" ) %>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div v-else class="stats-block">
                    <div class="columns is-marginless">
                      <div class="column is-1">
                        <h1 class="title">:(</h1>
                      </div>
                      <div class="column">
                        <h1 class="title is-6">No scores available</h1>
                        <p class="subtitle is-7">Clan members need to play!</p>
                      </div>
                    </div>
                  </div>
                  <div v-if="data.scores.best.more.full == false" class="extra-block">
                    <a class="show-button" @click="AddLimit('bestscore')">Show more</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        {% endblock %} {% block bottom %}
        <script src="/static/js/pages/clan_profile.js"></script>
        {% endblock bottom %}